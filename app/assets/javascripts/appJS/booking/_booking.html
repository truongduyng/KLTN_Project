<div ng-show = "isfounddata">

  <div class="marginbot40 margintop20">
    <h1 style="display:inline;">{{branch.branch.name}}</h1>
    <rating ng-model="rate" readonly="isReadonly" ng-hover="hoveringOver(value)" on-leave="ishoverstar = false"></rating>
    <span ng-hide = "ishoverstar">({{rate}}/5)</span>
    <span ng-show = "ishoverstar">({{overstar}}/5)</span>
    <a href="#/{{branch.branch.name}}/review">Reviews</a>
  </div>

  <div class="row margintop20">
    <div class="col-lg-3 col-sm-4">
      <a class="btn btn-danger marginbot10" href="#/{{branch.branch.name}}/booking">Đặt sân</a>
      <div style="display:inline-block; margin-bottom: -20px;">
        <datepicker ng-model="dt" show-weeks="false" class="well well-sm" ng-click="date_change()"></datepicker>
      </div>

      <h4 class="marginbot5">Bảng phí</h4>
      <ul>
        <li class="marginbot10" ng-repeat= "asset_category in branch.asset_categories">
          <span>{{asset_category.name}}</span>
          <table border="1">
            <tr>
              <th class="text-center">Thời gian</th>
              <th class="text-center">Giá(,000 VNĐ)</th>
            </tr>
            <tr ng-repeat= "fee in asset_category.fees">
              <td class="text-center">{{fee.begin_time}} - {{fee.end_time}}</td>
              <td class="text-center">{{fee.price}}</td>
            </tr>
          </table>
        </li>
      </ul>
    </div>

    <div class="calendar_content">
      <table class="tablebooking">
        <tr>
          <th class="text-center" style="width:50px !important">Time</th>
          <th class="text-center" style="width:144px !important" ng-repeat= "asset in branch.assets">{{asset.name}}</th>
        </tr>
        <tbody ng-repeat= "hour in [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]">
          <tr>
            <td class="padding10 text-center" rowspan="4" style="width:50px !important">{{hour}}:00</td>
            <td id= "td_{{hour}}_{{asset._id.$oid}}" ng-click = "fast_book_open(hour,asset._id.$oid, $event)" ng-mouseenter="showtimeintd(hour,$event,true)" ng-mouseleave="showtimeintd(hour,$event,false)" ng-repeat= "asset in branch.assets"></td>
          </tr>
          <tr>
            <td id="td_{{hour}}_15_{{asset._id.$oid}}" ng-click = "fast_book_open(hour+0.25,asset._id.$oid, $event)" ng-mouseenter="showtimeintd(hour+0.25,$event,true)" ng-mouseleave="showtimeintd(hour+0.25,$event,false)" ng-repeat= "asset in branch.assets"></td>
          </tr>
          <tr>
            <td id="td_{{hour}}_30_{{asset._id.$oid}}" ng-click = "fast_book_open(hour+0.5,asset._id.$oid, $event)" ng-mouseenter="showtimeintd(hour+0.5,$event,true)" ng-mouseleave="showtimeintd(hour+0.5,$event,false)" ng-repeat= "asset in branch.assets"></td>
          </tr>
          <tr>
            <td id="td_{{hour}}_45_{{asset._id.$oid}}" ng-click = "fast_book_open(hour+0.75,asset._id.$oid, $event)" ng-mouseenter="showtimeintd(hour+0.75,$event,true)" ng-mouseleave="showtimeintd(hour+0.75,$event,false)" ng-repeat= "asset in branch.assets"></td>
          </tr>
        </tbody>
      </table>
      <div id= "ticket_temp" class="ticket">
        <span>{{hour_begin}} - {{hour_end}}</span><br>
        <span>Gia: {{price}}</span>
      </div>
    </div>
  </div>

  <div id='minibooking'class="boxbooking">
    <button type="button" class="close" style="color: red" aria-hidden="true" ng-click="close_minibooking()">&times;</button><br>
    <p class="marginbot5">Thoi gian: {{ dt | date:'dd-MM-yyyy'}}, {{hour_begin}} - <select ng-options = "hour_end for hour_end in hour_end_list" ng-model= 'hour_end' ng-change='update_hour_end()'/></p>
    <p class="marginbot5">Dia diem: <a href="">{{branch.branch.name}}</a></p>
    <p class="marginbot5">Dat boi: <a href="" title="">{{user.fullname}}</a>, sdt: {{user.phone}}</p>
    <p class="marginbot5">Gia: {{price}} (.000 VND)</p>
    <button class="btn btn-default pull-left marginright20" type="submit" ng-click="ticket_create(dt,hour_begin,hour_end)">Đặt</button>
  </div>

  <div id='miniedit' class="boxbooking">
    <button type="button" class="close" style="color: red" aria-hidden="true" ng-click="close_miniedit()">&times;</button><br>
    <p class="marginbot5">Thoi gian: {{dt | date: 'dd-MM-yyyy'}}, <span id='time_ticket'></span></p>
    <p id='price_ticket' class="marginbot5"></p>
    <p id='ticket_id_hidden' hidden= 'true'></p>
    <button class="btn btn-primary pull-left marginright20" type="submit" ng-click="ticket_edit()">Cap Nhat</button>
    <button class="btn btn-danger pull-right marginright20" type="submit" ng-click="ticket_delete()">Xoa</button>
  </div>
</div>

<div ng-hide="isfounddata">
  <h3>Not found this bussiness</h3>
</div>
